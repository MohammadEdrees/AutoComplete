{"ast":null,"code":"import _asyncToGenerator from \"D:/Tasks/AutoComplete/AutoComplete/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { debounceTime, distinctUntilChanged, filter, fromEvent, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../general.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"input\"];\n\nfunction HomeComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", item_r2.sku, \" -- \", item_r2.description, \"\");\n  }\n}\n\nexport class HomeComponent {\n  constructor(generalService) {\n    this.generalService = generalService;\n    this.searchResult = new Array();\n  }\n\n  ngOnInit() {\n    console.log(\"on init\");\n    console.log(this.searchResult);\n  }\n\n  onTextChange(changedText) {\n    //this.cancelPendingRequests();\n    const data = this.generalService.searchFromApi(changedText).subscribe(response => {\n      console.log(response);\n      this.searchResult = response;\n      console.table(this.searchResult[0]);\n    }, errorResponse => {\n      console.error(errorResponse);\n    });\n  }\n\n  ngAfterViewInit() {\n    var _this = this;\n\n    // server-side search\n    fromEvent(this.input.nativeElement, 'keyup').pipe(untilDestroyed(this), filter(Boolean), debounceTime(150), distinctUntilChanged(), tap( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (event) {\n        console.log(`The input value is ${_this.input.nativeElement.value}`);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }())).subscribe();\n  }\n\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.GeneralService));\n};\n\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  viewQuery: function HomeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n    }\n  },\n  decls: 5,\n  vars: 1,\n  consts: [[\"type\", \"text\", \"placeholder\", \" enter text here \", 1, \"form-control\", 3, \"keyup\"], [\"searchInput\", \"\"], [1, \"w-100\", \"h-100\", \"bg-danger\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"input\", 0, 1);\n      i0.ɵɵlistener(\"keyup\", function HomeComponent_Template_input_keyup_0_listener() {\n        i0.ɵɵrestoreView(_r3);\n\n        const _r0 = i0.ɵɵreference(1);\n\n        return i0.ɵɵresetView(ctx.onTextChange(_r0.value));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"ul\");\n      i0.ɵɵtemplate(4, HomeComponent_li_4_Template, 2, 2, \"li\", 3);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.searchResult);\n    }\n  },\n  dependencies: [i2.NgForOf],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";AAEA,SAASA,YAAT,EAAuBC,oBAAvB,EAA6CC,MAA7C,EAAqDC,SAArD,EAAgEC,GAAhE,QAA2E,MAA3E;;;;;;;;ICCQC;IAAuCA;IAAoCA;;;;;IAApCA;IAAAA;;;;ADO/C,OAAM,MAAOC,aAAP,CAAoB;EACxBC,YAAoBC,cAApB,EAAkD;IAA9B;IACpB,oBAAwB,IAAIC,KAAJ,EAAxB;EADsD;;EAGtDC,QAAQ;IACNC,OAAO,CAACC,GAAR,CAAY,SAAZ;IACAD,OAAO,CAACC,GAAR,CAAY,KAAKC,YAAjB;EACD;;EACDC,YAAY,CAACC,WAAD,EAAoB;IAC9B;IACA,MAAMC,IAAI,GAAG,KAAKR,cAAL,CACVS,aADU,CACIF,WADJ,EAEVG,SAFU,CAECC,QAAD,IAAsB;MAC7BR,OAAO,CAACC,GAAR,CAAYO,QAAZ;MACA,KAAKN,YAAL,GAAkBM,QAAlB;MACAR,OAAO,CAACS,KAAR,CAAc,KAAKP,YAAL,CAAkB,CAAlB,CAAd;IACD,CANQ,EAOTQ,aAAa,IAAG;MACdV,OAAO,CAACW,KAAR,CAAcD,aAAd;IACD,CATQ,CAAb;EAYD;;EACDE,eAAe;IAAA;;IACb;IACJpB,SAAS,CAAC,KAAKqB,KAAL,CAAWC,aAAZ,EAA0B,OAA1B,CAAT,CACKC,IADL,CAEQC,cAAc,CAAC,IAAD,CAFtB,EAGQzB,MAAM,CAAC0B,OAAD,CAHd,EAIQ5B,YAAY,CAAC,GAAD,CAJpB,EAKQC,oBAAoB,EAL5B,EAMQG,GAAG;MAAA,6BAAC,WAAOyB,KAAP,EAA8B;QAChClB,OAAO,CAACC,GAAR,CAAY,sBAAsB,KAAI,CAACY,KAAL,CAAWC,aAAX,CAAyBK,KAAK,EAAhE;MACD,CAFE;;MAAA;QAAA;MAAA;IAAA,IANX,EAUKZ,SAVL;EAWC;;AApCyB;;;mBAAbZ,eAAaD;AAAA;;;QAAbC;EAAayB;EAAAC;IAAA;;;;;;;;;;;;;;;;;MCV1B3B;MAAqFA;QAAAA;;QAAA;;QAAA,OAASA,2CAAT;MAAwC,CAAxC;MAArFA;MACAA,+BAAoC,CAApC,EAAoC,IAApC;MAEQA;MACJA;;;;MADyBA;MAAAA","names":["debounceTime","distinctUntilChanged","filter","fromEvent","tap","i0","HomeComponent","constructor","generalService","Array","ngOnInit","console","log","searchResult","onTextChange","changedText","data","searchFromApi","subscribe","response","table","errorResponse","error","ngAfterViewInit","input","nativeElement","pipe","untilDestroyed","Boolean","event","value","selectors","viewQuery"],"sourceRoot":"","sources":["D:\\Tasks\\AutoComplete\\AutoComplete\\ClientApp\\src\\app\\home\\home.component.ts","D:\\Tasks\\AutoComplete\\AutoComplete\\ClientApp\\src\\app\\home\\home.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, ElementRef, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { debounceTime, distinctUntilChanged, filter, fromEvent, tap } from 'rxjs';\r\nimport { GeneralService } from '../general.service';\r\nimport { product } from '../models/product';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\nexport class HomeComponent implements OnInit{\r\n  constructor(private generalService: GeneralService) {}\r\n  searchResult:product[]= new Array<product>();\r\n  @ViewChild('input', {static: false}) input!: ElementRef;\r\n  ngOnInit(): void {\r\n    console.log(\"on init\")\r\n    console.log(this.searchResult)\r\n  }\r\n  onTextChange(changedText: string) {\r\n    //this.cancelPendingRequests();\r\n    const data = this.generalService\r\n      .searchFromApi(changedText)\r\n      .subscribe((response:product[])=>{\r\n          console.log(response)\r\n          this.searchResult=response;\r\n          console.table(this.searchResult[0])\r\n        },\r\n        errorResponse => {\r\n          console.error(errorResponse);\r\n        }\r\n      );\r\n   \r\n  }\r\n  ngAfterViewInit() {\r\n    // server-side search\r\nfromEvent(this.input.nativeElement,'keyup')\r\n    .pipe(\r\n        untilDestroyed(this),\r\n        filter(Boolean),\r\n        debounceTime(150),\r\n        distinctUntilChanged(),\r\n        tap(async (event:KeyboardEvent) => {\r\n          console.log(`The input value is ${this.input.nativeElement.value}`);\r\n        })\r\n    )\r\n    .subscribe();\r\n}\r\n  //  cancelPendingRequests() {\r\n  //   this.searchResult.forEach(sub => sub.unsubscribe());\r\n  //  }\r\n\r\n\r\n}","<input #searchInput type=\"text\" placeholder=\" enter text here \" class=\"form-control\" (keyup)=\"onTextChange(searchInput.value)\"/>\r\n<div  class=\"w-100 h-100 bg-danger\">\r\n    <ul>\r\n        <li *ngFor=\"let item of searchResult\" >{{item.sku}} -- {{item.description}}</li>\r\n    </ul>\r\n</div>\r\n\r\n<!-- <app-search-input  #searchInput   (textChange)=\"onTextChange(searchInput.value)\"></app-search-input>\r\n<ng-container *ngIf=\"searchResult != null\">\r\n    <ol *ngIf=\"searchResult.length > 0; else noResults\">\r\n        <li *ngFor=\"let item of searchResult\">\r\n            {{item.sku}}\r\n        </li>\r\n    </ol>\r\n    <ng-template #noResults>\r\n        No results\r\n    </ng-template>\r\n</ng-container> -->"]},"metadata":{},"sourceType":"module"}